# 第二章 Java 内存区域与内存溢出异常

## 内存的有哪几个区域组成？

* 堆
* 栈
  * 虚拟机栈
  * 本地方法栈
* 程序计数器
* 方法区，包含运行时常量池
* 直接内存

## 对象在内存中有哪几部分？

* 对象头
* 实例数据
* 对齐填充

对象头包括 MarkWord，指向对象类型的指针（不一定，看虚拟机的实现），如果是数组，还需要包含数组长度的信息

MarkWord 就是一个 32 位或 64 位长度的空间，为了使这么小的空间能存储更多的信息，MarkWord 中存储信息会根据对象状态的不同有不同的解释

## 对象的访问定位方式有几种？

一般有两种

* 句柄
* 直接指针

句柄就是说在本地变量表里 reference 类型的变量存的是句柄的地址，句柄包含对象实例的指针和对象类型数据的指针，找到一个对象的信息需要三次寻址

直接指针就是说在本地变量表里 reference 类型的变量存的是对象实例的内存地址，对象实例中存储了对象类型数据的地址，找到一个对象的信息需要两次寻址

句柄的优点是提供了一层抽象，对象地址改变的时候，reference 无需改变

直接指针的优点是速度快，少了一次寻址


